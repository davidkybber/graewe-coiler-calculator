# Development Setup Guide

## Prerequisites

- Node.js 18+ (LTS recommended)
- npm or yarn package manager
- Git
- VS Code with recommended extensions

## Initial Setup

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd graewe-coiler-calculator
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Start development server**
   ```bash
   npm run dev
   ```

4. **Open in browser**
   - Development: `http://localhost:5173`
   - Network access: Check terminal for network URL

## VS Code Extensions (Recommended)

Create `.vscode/extensions.json`:
```json
{
  "recommendations": [
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "ms-vscode.vscode-typescript-next",
    "usernamehw.errorlens",
    "ms-playwright.playwright",
    "orta.vscode-jest"
  ]
}
```

## Available Scripts

- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm run preview` - Preview production build
- `npm run test` - Run unit tests
- `npm run test:ui` - Run tests with UI
- `npm run test:e2e` - Run end-to-end tests
- `npm run lint` - Run ESLint
- `npm run type-check` - Run TypeScript compiler check
- `npm run format` - Format code with Prettier

## Environment Variables

Create `.env.local` for local development:
```env
VITE_APP_TITLE=GRAEWE Coiler Calculator
VITE_APP_VERSION=1.0.0
```

## Testing Strategy

### Unit Tests
- Located in `src/**/*.test.ts`
- Uses Vitest + React Testing Library
- Focus on business logic and component behavior

### E2E Tests
- Located in `e2e/`
- Uses Playwright
- Tests critical user journeys across devices

### Running Tests
```bash
# Unit tests
npm run test

# E2E tests
npm run test:e2e

# Test coverage
npm run test:coverage
```

## PWA Development

### Service Worker
- Automatically generated by Vite PWA plugin
- Located in `dist/sw.js` after build
- Handles caching strategies and offline functionality

### Testing PWA Features
1. Build the app: `npm run build`
2. Preview: `npm run preview`
3. Use Chrome DevTools > Application tab
4. Test offline functionality
5. Test install prompts

## Mobile Development

### Device Testing
```bash
# Start with network access
npm run dev -- --host

# Access from mobile device using network IP
# Check terminal output for exact URL
```

### Browser DevTools
- Use responsive design mode
- Test common breakpoints:
  - Mobile: 375px, 414px
  - Tablet: 768px, 1024px
  - Desktop: 1280px, 1920px

## Deployment

### GitHub Pages
- Automatic deployment via GitHub Actions
- Triggered on push to main branch
- Available at: `https://username.github.io/graewe-coiler-calculator`

### Manual Deployment
```bash
npm run build
npm run deploy
```

## Troubleshooting

### Common Issues

1. **Port already in use**
   ```bash
   # Kill process on port 5173
   lsof -ti:5173 | xargs kill -9
   ```

2. **Node modules issues**
   ```bash
   rm -rf node_modules package-lock.json
   npm install
   ```

3. **TypeScript errors**
   ```bash
   npm run type-check
   # Fix errors before continuing
   ```

4. **PWA not updating**
   - Clear browser cache
   - Check service worker in DevTools
   - Rebuild the application

### Performance Debugging
```bash
# Bundle analysis
npm run build:analyze

# Lighthouse CI
npm run lighthouse
```

## Code Quality

### Pre-commit Hooks
Husky runs the following on commit:
- ESLint
- Prettier
- TypeScript check
- Unit tests

### Code Coverage
- Minimum 80% coverage required
- Check coverage with: `npm run test:coverage`
- View detailed report in `coverage/index.html`

## Architecture Notes

### State Management
- React hooks for local state
- Context API for app-wide state
- No external state management needed for current scope

### Styling
- Tailwind CSS for utility classes
- CSS Modules for component-specific styles
- Design tokens in `src/styles/tokens.css`

### Error Handling
- Error boundaries for React components
- Result<T, E> pattern for async operations
- User-friendly error messages

## Next Steps for New Developers

1. Read `docs/PROJECT_OVERVIEW.md`
2. Review `.cursorrules` for development guidelines
3. Explore the codebase structure
4. Run tests to understand expected behavior
5. Check GitHub Issues for current tasks

## Getting Help

- Check existing documentation in `docs/`
- Review GitHub Issues and Discussions
- Refer to framework documentation:
  - [React](https://react.dev)
  - [Vite](https://vitejs.dev)
  - [Tailwind CSS](https://tailwindcss.com)
  - [Vitest](https://vitest.dev)
